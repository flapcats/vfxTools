#Renames shader's shadingEngine to shader + SG

import maya.cmds as cmds

"""
For Shelf:

import renameShadingNodes
reload(renameShadingNodes)

renameShadingNodes.renameShadingNodes()


"""

    
#----------------------

def renameShadingNodes():




    def renameShadingEngine():
            
        shadingEngineName = []
        shader = cmds.ls(sl=True)
        
        surfaceShader = '%s.surfaceShader' % shader[0]
        connections = cmds.listConnections(shader, connections=True, t='shadingEngine')
        shadingEngine = connections[1]
        
        nodeName = str(shader[0])+"_SG"
        cmds.rename(shadingEngine, nodeName)


    def renameHistory():

        for i in nodesToRename:
            if i != shader:
                
                nodeName = shader+"_"+str(i)
                print "Renaming to "+nodeName
                cmds.rename(i, nodeName)


    selected = cmds.ls(sl=True)
    renameThings = cmds.confirmDialog( title='Rename nodes', message='Rename:', button=['shadingEngine','history only','both','Cancel'], defaultButton='both', cancelButton='Cancel', dismissString='No' )


    for i in selected:
        shader = i
        nodesToRename = cmds.listHistory(i)
        print nodesToRename
        #shader = shader[0]
        
        if renameThings == "both":
            renameShadingEngine()
            renameHistory()
            
        if renameThings == "history only":
            renameHistory()
        
        if renameThings == "shadingEngine":
            renameShadingEngine()



















